<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<!--<link rel="stylesheet" href="weUI/weui.min.css">-->
	<link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.2/style/weui.min.css">
	<link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.0/css/jquery-weui.min.css">
	<link rel="stylesheet" href="info.css">
	<title>询价回复详情</title>
</head>
<body ontouchstart>
	<div class="pageContainer">
		<div class="paging">
			<div id="header">
				<h3>询价回复详情</h3>
			</div>
		</div>
		<div class="container">
			<div class="resultPart clone">
				<div class="weui-flex">
					<div class="weui-flex__item">
						需求编号: <span class="needPartCode"></span>
					</div>
				</div>
				<div class="weui-flex">
					<div class="weui-flex__item">
						配件编号: <span class="partsCode"></span>
					</div>
				</div>
				<div class="weui-flex">
					<div class="weui-flex__item">
						配件名称: <span class="partsName"></span>
					</div>
				</div>
				<div class="weui-flex">
					<div class="weui-flex__item">
						数量: <span class="quantity"></span>
					</div>
					<div class="weui-flex__item">
						价格: <span class="price"></span>
					</div>
				</div>
				<div class="weui-flex">
					<div class="weui-flex__item">
						配件类别: <span class="partsType"></span>
					</div>
					<div class="weui-flex__item">
						配件品牌: <span class="partsBrand"></span>
					</div>
				</div>
				<div class="weui-flex">
					<div class="weui-flex__item">
						总价: <span class="totalPrice"></span>
					</div>
				</div>
			</div>
		</div>
		<div class="comfirm-constract">
			<input type="checkbox" id="constract" name="confirmConstract">
			<label for="constract">
				阅读并同意
			</label>
			<a href="/resources/contract.html" target="_blank" class="">相关条款</a>
		</div>
		<a href="javascript:;" class="weui-btn weui-btn_default btn-confirm">确定</a>
		<div class="weui-footer">
			<p class="weui-footer__text">Copyright © 2017-2018 北京微重力 All rights reserved.</p>
			<p class="weui-footer__text">京ICP备17023267号   京公网安备 11010802023299号</p>
		</div>
	</div>
	<div class="noData">
		<div class="weui-loadmore weui-loadmore_line">
			<span class="weui-loadmore__tips">页面已过期,暂无数据</span>
		</div>
	</div>
	<script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/jquery-weui/1.2.0/js/jquery-weui.js"></script>
	<script src="https://cdn.bootcss.com/clipboard.js/2.0.0/clipboard.min.js"></script>
	<script>
		$(document).ready(function(){
			function getValue(name) {
				var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
				var r = window.location.search.substr(1).match(reg);
				if(r!=null)return  unescape(r[2]); return null;
			}
			var code = getValue('id');
			$.getJSON('info.json',function(json){
				$('.pageContainer').show();
				if(json.success && json.data && json.data.length){
					if(json.data[0].codes.length){
						$.each(json.data[0].codes,function(){
							var resultPartClone = $('.container').find('.clone').clone().removeClass('clone').show();
							resultPartClone.find('.needPartCode').html(this.originCode.code);
							resultPartClone.find('.partsCode').html(this.parts.code);
							resultPartClone.find('.partsName').html(this.parts.name);
							resultPartClone.find('.partsType').html(typeKeyToValue(this.parts.tags[1000]));
							resultPartClone.find('.partsBrand').html(this.parts.brand.name);
							resultPartClone.find('.quantity').html(this.quantity);
							resultPartClone.find('.price').html(this.price);
							resultPartClone.find('.totalPrice').html(this.price * this.quantity);
							$('.container').append(resultPartClone);
						});
					}
				}else{
					$('.pageContainer').hide();
					$('.noData').show();
				}
			});
			$('.btn-confirm').click(function(){
				if(!$('#constract').prop('checked')){
					$.alert('请先阅读相关条款');
					return false;
				}
			});
			//复制链接
			var clipboard = new ClipboardJS('.btn-confirm', {
				// 点击copy按钮，直接通过text直接返回复印的内容
				text: function() {
					return location.href;
				}
			});
			clipboard.on('success', function(e) {
				$.alert('复制链接成功');
				e.clearSelection();
			});
			clipboard.on('error', function(e) {
				$.alert('复制链接失败');
			});

			function typeKeyToValue(name){
				//PartsType  为 getPartsType.js中的变量（全局）
				for(var key in PartsType){
					if(name == key||name == PartsType[key]){
						return PartsType[key];
					}
				}
			}
			var PartsType = {
				"OE":"主机原厂件",
				"SUPPORTOE":"配套原厂件",
				"CIRCULATEOE":"流通原厂件",
				"AM":"经济适用件",
				"BRANDPARTS":"配套品牌件",
				"AFTERMARKETBRANDPARTS":"售后品牌件",
				"DETACHEDPARTS":"拆车回用件",
				"RENOVATIONPARTS":"再制造件",
				"COMMONPARTS":"通用件",
				"CHOICESTPARTS":"精品选装件",
				"INDUSTRIALPARTS":"工业用品",
				"TOOLEQUIPMENT":"工具设备",
				"OTHERS":"其他"
			}
		});
	</script>
</body>
</html>
