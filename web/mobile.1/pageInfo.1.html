<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="../js/resources/jquery-mobile-1.4.5/jquery.mobile-1.4.5.min.css">
	<link rel="stylesheet" href="../js/resources/vendor/AdminLTE-2.3.11/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="pageInfo.1.css">
	<title>Document</title>
</head>
<body>
	<div class="clone" style="display: none">
		<label for=""></label>
		<span></span>
	</div>
	<script src="../js/lib/jquery-1.11.1.js"></script>
	<script src="../js/resources/jquery-mobile-1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<script>
			var data = {"success":true,"data":[{"id":"1","originProduct": {
				"product": {
					"code": "ABC1000",
					"name": "前挡风镜",
					"parts": {
						"code": "ABC1000",
						"name": "前挡风镜"
					}
				},
				"price": "99",
				"quantity": 10
			},"product":{"code":"ABC1000","name":"前挡风镜d","parts":{"code":"ABC1000","name":"前挡风镜"}},"price":"99","quantity":"10"},{"id":"2","originProduct": {
				"product": {
					"code": "ABC100001",
					"name": "前挡风镜222",
					"parts": {
						"code": "ABC100001",
						"name": "前挡风镜222"
					}
				},
				"price": "999",
				"quantity": 10
			},"product":{"code":"ABC1001","name":"后挡风镜","parts":{"code":"ABC1001","name":"后挡风镜"}},"price":"80","quantity":"5"},{"id":"3","originProduct": {
				"product": {
					"code": "ABC1002",
					"name": "大灯",
					"parts": {
						"code": "ABC1002",
						"name": "大灯"
					}
				},
				"price": "50",
				"quantity": 10
			},"product":{"code":"ABC1002","name":"大灯","parts":{"code":"ABC1002","name":"大灯"}},"price":"50","quantity":"2"},{"id":"4","originProduct": {
				"product": {
					"code": "ABC1003",
					"name": "车顶",
					"parts": {
						"code": "ABC1003",
						"name": "车顶"
					}
				},
				"price": "888",
				"quantity": 10
			},"product":{"code":"ABC1003","name":"车顶","parts":{"code":"ABC1003","name":"车顶"}},"price":"888","quantity":"3"},{"id":"5","originProduct": {
				"product": {
					"code": "ABC1004",
					"name": "车窗",
					"parts": {
						"code": "ABC1004",
						"name": "车窗"
					}
				},
				"price": "69",
				"quantity": 10
			},"product":{"code":"ABC1004","name":"车窗","parts":{"code":"ABC1004","name":"车窗"}},"price":"69","quantity":"30"},{"id":"6","originProduct": {
				"product": {
					"code": "ABC1005",
					"name": "中网",
					"parts": {
						"code": "ABC1005",
						"name": "中网"
					}
				},
				"price": "22",
				"quantity": 10
			},"product":{"code":"ABC1005","name":"中网","parts":{"code":"ABC1005","name":"中网"}},"price":"22","quantity":"11"}]}
			var totalPrice = 0,
				totalQuantity = 0;

			var header = '<div data-role="header" id="header">'+
							'<header>'+
								'<h3>微重力</h3>'+
								'<span>商户:中华科技有限公司(M1001)</span>'+
							'</header>'+
							'<h2></h2>'+
						'</div>';
			var div = $('<div />').attr('data-role','page').addClass('paging').prop('id','page');
			var container = $('<div />').addClass('container');
			$.each(data.data,function(k){
				totalPrice+= parseInt(this.price);
				totalQuantity+= parseInt(this.quantity);
				//content
				var content = $('<div />').addClass('content');
				var divP1 = $('<div />').addClass('p1');
				$('<p />').text('需求编号: ' + this.originProduct.product.code).appendTo(divP1);
				$('<p />').text('商品名称: ' + this.originProduct.product.name).appendTo(divP1);
				$('<p />').text('数量: ' + this.originProduct.quantity).appendTo(divP1);
				$('<p />').text('价格: ' + this.originProduct.price).appendTo(divP1);

				var divP = $('<div />').addClass('p');
				$('<p />').text('商品编号: ' + this.product.code).appendTo(divP);
				$('<p />').text('商品名称: ' + this.product.name).appendTo(divP);
				$('<p />').text('数量: ' + this.quantity).appendTo(divP);
				$('<p />').text('价格: ' + this.price).appendTo(divP);
				content.append(divP1).append(divP).appendTo(container);
			});
			// var buttonContainer = $('<div />').addClass('buttonContainer');
			// $('<button />').text('下单').appendTo(buttonContainer);
			// $('<button />').text('粘贴').appendTo(buttonContainer);
			// div.append(header).append(container).append(buttonContainer);
			div.append(header).append(container);
			// $('body').append(div);
			$('body').append(div);
			var count = 0;
			setTimeout(function(){
				$.each($('.paging'),function(k){
					if($(this).css('display') === 'block')
						count = k;
				});
				setPublic();
			},500);
			function setPublic(){
				var headerIframe = $('#header').eq(count);
				var merchant = $('.clone').clone().removeClass('clone').show().addClass('col-xs-12');
				merchant.find('label').addClass('col-xs-3').text('商户: ');
				merchant.find('span').text('彩虹科技有限公司');
				// var text1 = $('.clone').clone().removeClass('clone').addClass('col-xs-6').show();
				// text1.find('label').addClass('col-xs-6').text('总价: ');
				// text1.find('span').text(totalPrice);
				// var text2 = $('.clone').clone().removeClass('clone').addClass('col-xs-6').show();
				// text2.find('label').addClass('col-xs-6').text('总数量: ');
				// text2.find('span').text(totalQuantity);
				// var div = $('<div >').css('lineHeight','30px').append(merchant).append(text1).append(text2);
				var div = $('<div >').css('lineHeight','30px').append(merchant);
				headerIframe.find('h2').html(div);
			}
		// });
	</script>
</body>
</html>
