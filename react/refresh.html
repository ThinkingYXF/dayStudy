<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>
<body>
	<div id="example"></div>


	<script src="https://cdn.bootcss.com/react/15.4.2/react.min.js"></script>
	<script src="https://cdn.bootcss.com/react/15.4.2/react-dom.min.js"></script>
	<script src="https://cdn.bootcss.com/babel-standalone/6.22.1/babel.min.js"></script>
	<script type="text/babel">
		function showTime(params) {
			var MyElement = (
				<div>
					<p>现在的时间: {new Date().toLocaleTimeString()}</p>
				</div>
			)
			ReactDOM.render(MyElement, document.getElementById('example'));
		}

		class Welcome extends React.Component {
			render(){
				return <h1>hello world</h1>
			}
		}

		// ReactDOM.render(new Welcome().render(), document.getElementById('example'));
		// setInterval(showTime, 1000);

		//显示当前时间
		class Clock extends React.Component {
			constructor(props){
				super(props);
				this.state = {date: new Date()};
			}

			componentDidMount(){
				this.timerID = setInterval(()=>this.tick(), 1000);
			}
			componentWillUnMount(){
				clearInterval(this.timerID);
			}

			tick(){
				this.setState({
					date: new Date()
				})
			}
			render(){
				return (
					<div>
						<p>现在的时间: {this.state.date.toLocaleTimeString()}</p>
					</div>
				)
			}
		}

		//按钮切换
		class ButtonExchange extends React.Component{
			constructor(props){
				super(props);
				this.state = {isButtonOn: true};
				this.handleClick = this.handleClick.bind(this);
			}
			handleClick(params, e){
				console.log(params);
				this.setState((prevState)=>({
					isButtonOn: !prevState.isButtonOn
				}))
			}
			render(){
				return (
					<div>
						<button onClick={this.handleClick.bind(this, 'hello')}> {this.state.isButtonOn? 'on' : 'off' } </button>
					</div>
				)
			}
		}

		//show list
		function NumbersList(props){
			const numbers = props.numbers;
			const listItems = numbers.map((number) =>
				<li key={number.toString()}>{number}</li>
			);
			return (
				<ul>{listItems}</ul>
			)
		}
		const numbers = [1,2,3,4,5];


		function App(){
			return (
				<div>
					<Clock />
					<ButtonExchange />
					<NumbersList numbers={numbers} />
				</div>
			)
		}

		ReactDOM.render(
			// <Clock />,
			<App />,
			document.getElementById('example')
		)
	</script>
</body>
</html>
